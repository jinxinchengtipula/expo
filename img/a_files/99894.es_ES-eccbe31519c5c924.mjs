"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[99894],{551587:(e,t,i)=>{i.d(t,{Z:()=>o});let o=e=>e.startsWith("enabled")||e.startsWith("employee")},910711:(e,t,i)=>{i.d(t,{Z:()=>d});var o=i(667294),n=i(883119),l=i(406893),a=i(749886),s=i(771981),r=i(785893);function d({playing:e,zIndexValue:t}){return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(l.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,r.jsx)(n.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:.8,position:"absolute",right:!0,rounding:a.yR,top:!0,zIndex:t?new n.Ry(t):s.lt,children:!e&&(0,r.jsx)(n.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},983435:(e,t,i)=>{i.d(t,{Z:()=>x});var o=i(667294),n=i(883119),l=i(140017),a=i(558273),s=i(340523),r=i(551587),d=i(5859),u=i(797456),c=i(749886),_=i(214164),p=i(217058),h=i(623409),g=i(554786),y=i(115557),m=i(369708),b=i(785893);let v=({accessibilityLabel:e,dataTestId:t,disable:i,handleTap:o,icon:l})=>(0,b.jsx)(n.xu,{"data-test-id":t,opacity:i?.5:void 0,children:(0,b.jsx)(n.iP,{disabled:i,onTap:o,children:(0,b.jsx)(n.JO,{accessibilityLabel:e,color:"light",icon:l,size:16})})});function x({activePageIndex:e,handlePanelChange:t,handlePlay:i,handlePause:x,handlePausePlay:f,handleMute:P,handleVideoScrubbingNewPage:w,handleWatchAgain:S,isPlaying:I,isMuted:j,isPanelOpen:A,pages:C,pageCount:z,pinId:L="",progressInfo:E,showEndCard:M,showVideoControls:T=!1,viewParameter:k,isStoryPin:V=!0,captionsUrl:$="",captionsExpGroup:H=""}){let D=(0,l.ZP)(),{currentTime:B}=E||{},{seekTimes:R}=(0,_.Hx)(),Z=(0,d.B)(),O=(0,m.rG)(),{checkExperiment:F}=(0,s.F)(),J=(0,g.HG)(),{isAuthenticated:W}=Z,{captionsEnabled:q,setCaptionsEnabled:G}=O,N=(0,h.Z)(),U=C[e],{should_mute:X}=U||j,K=Object.keys(R).includes(L)&&R[L]?R[L]:B,Y=(0,o.useMemo)(()=>C.map(e=>{let t=e.blocks?.find(e=>3===e.block_type),i=t?.video?.video_list?.V_HLSV3_MOBILE?.duration||t?.video?.video_list?.V_720P?.duration;return i?{duration:i,isVideo:!0}:{duration:a.oN,isVideo:!1}}),[C]),Q=[{duration:E?.duration||0,isVideo:!0}],ee=V?Y:Q,et=(U&&U.blocks?.[0]||{}).video?.video_list?.V_HLSV3_MOBILE?.captions_urls,ei=!1;(et&&0!==Object.keys(et).length||$)&&(ei=!0);let eo=V&&ei&&J?F(W?"auth_desktop_video_pin_captions":"unauth_desktop_video_pin_captions").group:"",en=H||eo,el=(0,r.Z)(en),ea=el&&F(W?"auth_default_captions_on":"unauth_default_captions_on").anyEnabled;ea&&G(!0);let es=(0,o.useMemo)(()=>ee.reduce((e,t)=>e+(t.duration||0),0)/(V?y.gJ:1),[ee,V]),er=(0,o.useMemo)(()=>ee.filter((t,i)=>i<e).reduce((e,t)=>e+(t.duration||0),0)/y.gJ,[ee,e]),ed=ee.length>0&&ee[e].isVideo?K+er:5*B+er,eu=D.bt("Ocultar subtítulos", "Hide captions", "gestalt.video.accessibilityHideCaptionsLabel", undefined, true),ec=D.bt("Mostrar subtítulos", "Show captions", "gestalt.video.accessibilityShowCaptionsLabel", undefined, true);return(0,b.jsxs)(n.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,b.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:T||!I?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,b.jsxs)(n.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,b.jsx)(v,{accessibilityLabel:I?D.bt("Pausa", "Pause", "closeup.IdeaPinVideo.Pause", undefined, true):D.bt("Reproducir", "Play", "closeup.IdeaPinVideo.Play", undefined, true),dataTestId:`story-pin-closeup-${I?"pause":"play"}`,handleTap:M&&S?S:f,icon:I?"pause":"play"}),E&&(0,b.jsxs)(n.xu,{"data-test-id":"time-display",children:[(0,b.jsx)(n.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`${(0,c.Lc)(ed)}`})," ",(0,b.jsx)(n.xu,{display:"inlineBlock",opacity:.6,children:(0,b.jsx)(n.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`/ ${(0,c.Lc)(es)}`})})]})]}),(0,b.jsxs)(n.kC,{direction:"row",gap:5,children:[(en.startsWith("enabled_captions")||en.startsWith("employees"))&&ei&&(0,b.jsx)(v,{accessibilityLabel:q?ec:eu,dataTestId:`closed-captions-button-${q?"disable":"enable"}`,handleTap:()=>{let e=J?"desktop_pin_page":"mweb_pin_page";q?(0,p.My)(`${e}.closed_captions_button.toggle_off`):(0,p.My)(`${e}.closed_captions_button.toggle_on`),N({action:"click",item:"closed-captions-button"}),O.setCaptionsEnabled(!q)},icon:q?"captions":"captions-outline"}),(0,b.jsx)(v,{accessibilityLabel:j?D.bt("Activar audio", "Unmute", "closeup.IdeaPinVideo.unmute", undefined, true):D.bt("Silenciar", "Mute", "closeup.IdeaPinVideo.mute", undefined, true),dataTestId:`story-pin-closeup-${j?"unmute":"mute"}`,disable:X,handleTap:P,icon:j?"mute":"sound"}),(0,b.jsx)(v,{accessibilityLabel:A?D.bt("Maximizar", "Maximize", "closeup.IdeaPinVideo.maximize", undefined, true):D.bt("Minimizar", "Minimize", "closeup.IdeaPinVideo.minimize", undefined, true),dataTestId:`story-pin-closeup-${A?"maximize":"minimize"}`,handleTap:t,icon:A?"maximize":"minimize"})]})]}),(0,b.jsx)(u.ZP,{activePageCurrentTime:K,activePageIndex:e,currentTime:ed,duration:es,handlePause:x,handlePlay:i,handleVideoScrubbingNewPage:w,isPlaying:I,pageCount:z,pageDurations:ee,pinId:L,progressInfo:E,shouldShowPlayhead:!0,showEndCard:M,showVideoControls:T,videoControlsExp:el,videoDurations:ee,viewParameter:k})]})}},797456:(e,t,i)=>{i.d(t,{$E:()=>m,$:()=>b,ZP:()=>P});var o=i(667294),n=i(883119),l=i(587703),a=i(140017),s=i(340523),r=i(5859),d=i(558273),u=i(115557),c=i(785893);function _({activePageCurrentTime:e,pillHeight:t,progressInfo:i,videoDuration:o}){let l=i?.currentTime??0,a=i?.duration??d.P6,s=`${o?.isVideo?Math.floor(1e4*(e||l)/(o.duration/u.gJ))/100:l/a*100}%`;return(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:m}},height:t,overflow:"hidden",rounding:"pill",children:(0,c.jsx)(n.xu,{color:b,dangerouslySetInlineStyle:{__style:{width:s}},height:"100%",rounding:"pill"})})}var p=i(749886),h=i(214164),g=i(554786),y=i(149722);let m="rgba(255,255,255,0.24)",b="light",v=()=>{},x=({children:e,setHoveringChange:t,handleMouseDown:i,handleMouseLeave:o,handleTouchStart:l,playhead:s,isPlaying:r,showVideoControls:d,videoControlsExp:u})=>{let _=(0,a.ZP)(),p=!(0,g.HG)();return u?(0,c.jsx)(n.iP,{children:(0,c.jsx)(n.xu,{ref:s,alignItems:"center","aria-label":_.bt("Barra de progreso del deslizador de vídeo", "Video scrubber progress bar", "ideaPin.closeupvideo.videoScrubberLabel", undefined, true),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:p?"center":"start",marginBottom:p?0:6,minHeight:"8px",onFocus:t(!0),onMouseDown:i,onMouseLeave:o,onMouseOver:t(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:l,opacity:u&&(d||!r)?1:0,paddingY:p?6:0,position:"relative",role:"progressbar",width:"100%",children:e})}):(0,c.jsx)(n.xu,{ref:s,alignItems:"center","aria-label":_.bt("Barra de progreso del deslizador de vídeo", "Video scrubber progress bar", "ideaPin.closeupvideo.videoScrubberLabel", undefined, true),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:p?"center":"start",marginBottom:p?0:6,minHeight:"8px",onFocus:t(!0),onMouseDown:i,onMouseLeave:o,onMouseOver:t(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:l,paddingY:p?6:0,position:"relative",role:"progressbar",width:"100%",children:e})},f=({currentTime:e=0,inRemoveRelatedStreamsExp:t,isMobile:i,isRTL:o,isSeeking:l,scrubberWidth:a,videoControlsExp:s})=>(0,c.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:o?{right:a}:{left:a}},"data-test-id":"video-progress-bar",position:"relative",children:[i&&l&&!t&&(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{top:"-32px"}},marginStart:-3,position:"absolute",children:(0,c.jsx)(n.xv,{color:"light",size:"100",children:(0,p.Lc)(e)})}),(0,c.jsx)(n.xu,{color:b,height:4,position:"absolute",rounding:"pill",children:(0,c.jsx)(n.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:l&&s?-8:-6}},height:l&&s?16:12,marginStart:-2,rounding:"circle",width:l&&s?16:12})})]});function P({activePageIndex:e,activePageCurrentTime:t,pageCount:i,progressInfo:a,showEndCard:d,duration:u=0,currentTime:p=0,pageDurations:m=[],handlePlay:P=v,handlePause:w=v,handleVideoScrubbingNewPage:S=v,videoDurations:I=[],viewParameter:j,isInactiveStreamPin:A=!1,isPlaying:C=!1,setVideoProgress:z,shouldShowPlayhead:L=!1,showVideoControls:E=!0,pinId:M="",videoControlsExp:T=!1}){let k=!(0,g.HG)(),V=(0,o.useRef)(null),{checkExperiment:$}=(0,s.F)(),{isRTL:H}=(0,r.B)(),[D,B]=(0,o.useState)(!1),[R,Z]=(0,o.useState)(C),[O,F]=(0,o.useState)(),J=(0,l.Z)(),{isSeekingIdeaPin:W}=(0,h.Hx)(),{updateSeekTime:q,updateSeekingIdeaPin:G}=(0,h.RC)(),N=(0,y.Z)(),U=N.isAuth,X=(0,o.useCallback)((t,o)=>{if(!A&&o<=i){if(o!==e&&S(o),z){let{isVideo:e}=I[o];z({currentTime:t/1e3,duration:e?a?.duration??1:5,pinId:M})}q(t/1e3,M)}J({event_type:101,view_type:3,view_parameter:j,component:14302})},[e,S,A,J,i,M,a?.duration,z,q,I,j]),K=`${p/u*100}%`,Y=m.map(e=>`${(e.duration||0)/u/10}%`),Q=(0,o.useMemo)(()=>{let e=0;return m.map(({duration:t})=>{let i=t+e,o={min:e,max:i};return e=i,o})},[m]),ee=k&&$(U?"closeup_auth_mweb_remove_streams":"closeup_unauth_mweb_remove_streams").anyEnabled,et=D?"0 1.2px":"0 1px",ei=e=>()=>B(e),eo=(0,o.useCallback)(e=>{if(V.current){let{left:t=0,right:i=0,width:o=0}=V.current.getBoundingClientRect(),n=H?Math.max(0,Math.min((i-e)/o,1)):Math.max(0,Math.min((e-t)/o,1)),l=n*u*1e3,a=Q.findIndex(e=>l>=e.min&&l<=e.max),s=-1===a?0:a;X(l-Q[s].min,s)}},[u,X,Q,H]),en=()=>{W||(Z(C||d),G(!0))},el=(0,o.useCallback)(e=>{W&&eo(e.pageX)},[eo,W]),ea=(0,o.useCallback)(e=>{if(W){e.preventDefault();let t=Array.from(e.changedTouches).find(e=>e.identifier===O);t&&eo(t.pageX)}},[W,eo,O]),es=(0,o.useCallback)(()=>{G(!1),ei(!1),F(void 0),R&&P()},[G,P,R]),er=(0,o.useCallback)(e=>{let t=Array.from(e.changedTouches).find(e=>e.identifier===O);t&&(G(!1),ei(!1),F(void 0)),R&&P()},[P,R,O,G]);(0,o.useEffect)(()=>(W&&!A&&(window.addEventListener("mousemove",el),window.addEventListener("mouseup",es),window.addEventListener("touchmove",ea),window.addEventListener("touchend",er)),()=>{window.removeEventListener("mousemove",el),window.removeEventListener("mouseup",es),window.removeEventListener("touchmove",ea),window.removeEventListener("touchend",er)}),[el,es,er,ea,A,W,eo,O]);let ed=i=>i<e||d?(0,c.jsx)(n.xu,{color:b,height:4,rounding:"pill"}):e===i&&a?(0,c.jsx)(_,{activePageCurrentTime:t,pillHeight:4,progressInfo:a,videoDuration:I[i]}):(0,c.jsx)(n.xu,{color:b,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"});return(0,c.jsxs)(x,{handleMouseDown:e=>{en(),C&&w(),eo(e.pageX)},handleMouseLeave:()=>{ei(!1)},handleTouchStart:e=>{en(),ei(!0);let t=e.changedTouches[0];F(t.identifier),C&&w(),eo(t.pageX)},isPlaying:C,playhead:V,setHoveringChange:ei,showVideoControls:E,videoControlsExp:T,children:[L&&(E&&T||D||W||k)&&(0,c.jsx)(f,{currentTime:t,inRemoveRelatedStreamsExp:ee,isMobile:k,isRTL:H,isSeeking:W,scrubberWidth:K,videoControlsExp:T}),Array(i).fill().map((e,t)=>(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{margin:et}},flex:"grow",width:Y.length===i?Y[t]:"auto",children:(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:ed(t)})},`${M}-${t}`))]})}},537513:(e,t,i)=>{i.d(t,{Z$:()=>a,by:()=>s,eL:()=>l});var o=i(419075),n=i(217058);let l=e=>{if("undefined"==typeof window)return"";let t=0,i=document.querySelector('[data-test-id="header"]');if(null!==i){let{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":let o=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==o){let{height:e}=o.getBoundingClientRect();t+=e}break;case"SearchItem":let n=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==n){let{height:e}=n.getBoundingClientRect();t+=e}let l=document.querySelector('[data-test-id="search-tab-bar"],[data-root-margin="search-one-bar"]');if(null!==l){let{height:e}=l.getBoundingClientRect();t+=e}}return`${-1*t}px 0px 0px 0px`},a=({videosDuration:e,vHLSV4VideoDuration:t,storyPinDataTotalVideoDuration:i})=>{let n=(0,o.Z)(e||t||i||0);return n},s=(e,t,i)=>{e?(0,n.My)(`${t}.mute_button.toggle_off`):(0,n.My)(`${t}.mute_button.toggle_on`),i({action:"click",item:"mute-button"})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/99894.es_ES-eccbe31519c5c924.mjs.map